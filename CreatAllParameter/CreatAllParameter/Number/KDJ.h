#pragma once
#include "NumberBase.h"

////////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
struct KDJ/*:public IndexBaseType*/
{
public:
	KDJ() :K_OF_KDJ(0), D_OF_KDJ(0), J_OF_KDJ(0){}
	StockDataType K_OF_KDJ;
	StockDataType D_OF_KDJ;
	StockDataType J_OF_KDJ;
// 	KDJ operator = (const KDJ& rhs){
// 		_Index1 = rhs._Index1;
// 		_Index2 = rhs._Index2;
// 		_Index3 = rhs._Index3;
// 		_Index4 = rhs._Index4;
// 		_Index5 = rhs._Index5;
// 		return *this;
// 	}
};
///////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
class CKDJCal 
	//public CNumberManager
{
	friend class CNumbersToSql;
public:
	CKDJCal(StockDataType day1, StockDataType day2, StockDataType day3);
	~CKDJCal(void);
// 	//////////////////////////////////////////////////////////////////////////
// 	//更新目录下所有CSV文件里的KDJ值(数据按列排)
// 	//strPath:目录路径
// 	//////////////////////////////////////////////////////////////////////////
// 	virtual void UpdateFileColumn(string strFolderPath);
// 	//////////////////////////////////////////////////////////////////////////
// 	//更新目录下所有CSV文件里的KDJ值(数据按行排)
// 	//strPath:目录路径
// 	//////////////////////////////////////////////////////////////////////////
// 	virtual void UpdatePathFilesRanks(string strPath);
// 	//////////////////////////////////////////////////////////////////////////
// 	//更新CSV文件文件里的KDJ值(数据按行排)
// 	//strPath:文件路径
// 	//////////////////////////////////////////////////////////////////////////
// 	virtual void UpdateFileRanks(string strfilename);
	//////////////////////////////////////////////////////////////////////////
	//
	//
	//////////////////////////////////////////////////////////////////////////
	bool GetNextKDJ(const DatePriceData& OneDayData, KDJ& mFrontKDJ);
	void Inition();
private:
	CKDJCal();
	void StaticSizePush(StockDataType mdata, float msize, list<StockDataType>& mList);
	list<StockDataType> _lHigh;
	list<StockDataType> _lLow;
	list<StockDataType> _lClose;
	//KDJ指标的参数
	const float _Nday, _M1, _M2;
};
