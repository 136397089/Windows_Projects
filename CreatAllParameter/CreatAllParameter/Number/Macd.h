#ifndef _MACD_H
#define _MACD_H

#pragma once
//#include "stdafx.h"
#include <Windows.h>
#include "IndexNumber.h"
#include "CommonFunction.h"


using namespace std;
class CMacdManager;

//////////////////////////////////////////////////////////////////////////
//MACD
//
//
//////////////////////////////////////////////////////////////////////////
struct Macd/*:public IndexBaseType*/
{
public:
	Macd() :m12(0), m26(0), diff(0), dea(0), bar(0){}
	tySData m12;
	tySData m26;
	tySData diff;
	tySData dea;
	tySData bar;
// 	Macd& operator = (const Macd& rhs){
// 		_Index1 = rhs._Index1;
// 		_Index2 = rhs._Index2;
// 		_Index3 = rhs._Index3;
// 		_Index4 = rhs._Index4;
// 		_Index5 = rhs._Index5;
// 		return *this;
// 	}
};



//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
class CMacdManager : public CNumberManager
{
public:
	CMacdManager(void);
	~CMacdManager(void);

// 	vector<string> CutString(string inputstring,string CutIndex);


	//////////////////////////////////////////////////////////////////////////
	//更新目录下所有CSV文件里的MACD值(数据按列排)
	//strPath:目录路径
	//////////////////////////////////////////////////////////////////////////
	virtual void UpdateFileColumn(string strFolderPath);
	//////////////////////////////////////////////////////////////////////////
	//更新目录下所有CSV文件里的MACD值(天数按行排)
	//strPath:目录路径
	//////////////////////////////////////////////////////////////////////////
	virtual void UpdatePathFilesRanks(string strPath) ;
	//////////////////////////////////////////////////////////////////////////
	//更新单个CSV文件里的MACD值(天数按行排)
	//strPath:文件路径
	//////////////////////////////////////////////////////////////////////////
	virtual void UpdateFileRanks(string strfilename);
	//////////////////////////////////////////////////////////////////////////
	//通过前日的MACD获得今日的MACD值
	//closeData:收盘价
	//mMacd:前日的MACD
	//////////////////////////////////////////////////////////////////////////
	bool GetNextMacd(const DatePriceData& OneDayData, Macd& mMacd);
private:
};


#endif
